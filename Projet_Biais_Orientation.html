<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Inès Bézie">

<title>Représenter votre futur métier - Analyse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Projet_Biais_Orientation_files/libs/clipboard/clipboard.min.js"></script>
<script src="Projet_Biais_Orientation_files/libs/quarto-html/quarto.js"></script>
<script src="Projet_Biais_Orientation_files/libs/quarto-html/popper.min.js"></script>
<script src="Projet_Biais_Orientation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Projet_Biais_Orientation_files/libs/quarto-html/anchor.min.js"></script>
<link href="Projet_Biais_Orientation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Projet_Biais_Orientation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Projet_Biais_Orientation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Projet_Biais_Orientation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Projet_Biais_Orientation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Projet_Biais_Orientation.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Représenter votre futur métier - Analyse</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Inès Bézie </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="analyse-générale" class="level1">
<h1>Analyse générale</h1>
<section id="méthodologie" class="level2">
<h2 class="anchored" data-anchor-id="méthodologie">Méthodologie</h2>
<p>Pour pouvoir mettre en lumière les stéréotypes liées au genre dans le monde du travail chez les élèves, nous pouvons créer un indice de stéréotype. Cet indice se construit par la moyenne des réponses aux 20 questions par individu. Plus la moyenne est élevée, plus les réponses données par cet individu vont dans le sens des stéréotypes.</p>
<p>NB. Pour homogénéiser l’indice, certaines affirmations ont été inversées pour toujours avoir 10 = très stéréotypé.</p>
<p>Par la suite, nous pouvons étudier les corrélations entre indice de stéréotype et déterminants sociaux.</p>
</section>
<section id="résultats" class="level2">
<h2 class="anchored" data-anchor-id="résultats">Résultats</h2>
<section id="comparaison-par-genre" class="level3">
<h3 class="anchored" data-anchor-id="comparaison-par-genre">Comparaison par genre</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  Genre        Moyenne    SD     n
  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1 Fille           3.01  1.29   232
2 Garçon          4.41  1.63   167
3 non concerné    4.66  2.43     9</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  Indice_stereotype by Genre
t = -9.1888, df = 304.36, p-value &lt; 2.2e-16
alternative hypothesis: true difference in means between group Fille and group Garçon is not equal to 0
95 percent confidence interval:
 -1.695786 -1.097583
sample estimates:
 mean in group Fille mean in group Garçon 
            3.008405             4.405090 </code></pre>
</div>
</div>
<p>La moyenne féminine des indices de stéréotypes est de 3,01 tandis qu’elle est de 4,41 pour les garçons.</p>
<p>–&gt; Boxplot</p>
<p>Le test t de Student (version de Welch, adaptée aux variances inégales) révèle une différence significative entre les filles et les garçons en ce qui concerne l’indice de stéréotype. On observe un p-value &lt; 2.2e-16 : la différence observée est hautement significative statistiquement.</p>
<p>L’intervalle de confiance à 95 % de la différence entre les moyennes est : [-1,70 ; -1,10] : En moyenne, les garçons ont un indice de stéréotype entre 1,1 et 1,7 points plus élevé que les filles.</p>
</section>
<section id="comparaison-selon-le-niveau-détude" class="level3">
<h3 class="anchored" data-anchor-id="comparaison-selon-le-niveau-détude">Comparaison selon le niveau d’étude</h3>
<p>Dans un premier temps, nous pouvons étudier si l’indice de stéréotype et le niveau d’étude de l’élève émettent une corrélation.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre_classe$Indice_stereotype and df_genre_classe$Niveau_etude
t = -4.2518, df = 406, p-value = 2.634e-05
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.2975850 -0.1116181
sample estimates:
       cor 
-0.2064654 </code></pre>
</div>
</div>
<p>Il existe une corrélation négative significative entre le niveau d’étude (de la 6e à la Terminale) et l’indice de stéréotype. Plus les élèves avancent dans leur parcours scolaire, plus leur vision des métiers semble moins stéréotypée. Même si le lien est modéré (r ≈ -0.21), il est statistiquement solide et va dans le sens d’une évolution positive avec l’âge/la maturité.</p>
<p>Nous pouvons à présent regarder s’il existe une différence statistiquement significative entre collégiens et lycéens relative à leur vision des métiers stéréotypés.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  Niveau  Moyenne    SD     n
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1 Collège    4.10  1.78   158
2 Lycée      3.31  1.44   250</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  Indice_stereotype by Niveau
t = 4.6829, df = 282.7, p-value = 4.396e-06
alternative hypothesis: true difference in means between group Collège and group Lycée is not equal to 0
95 percent confidence interval:
 0.4568748 1.1194594
sample estimates:
mean in group Collège   mean in group Lycée 
             4.099367              3.311200 </code></pre>
</div>
</div>
<p>Le test t de Student indique que les collégiens ont un indice de stéréotype significativement plus élevé que les lycéens. Avec une intervalle de confiance de 95%, la différence moyenne est estimée entre 0,46 et 1,12 points. On peut donc dire que les collégiens ont entre un demi-point et un point entier de plus en moyenne sur l’échelle de stéréotypes.</p>
<p>Cela rejoint notre résultat précédent qui a mis en lumière une corrélation signficativement négative du niveau d’étude avec l’indice de stéréotype des élèves. L’exposition à la diversité des parcours ou la maturité cognitive semblent pouvoir atténuer certains stéréotypes.</p>
</section>
<section id="comparaison-selon-lindice-de-position-sociale" class="level3">
<h3 class="anchored" data-anchor-id="comparaison-selon-lindice-de-position-sociale">Comparaison selon l’Indice de Position Sociale</h3>
<p>L’Indice de Position Sociale est un indicateur statistique qui permet de rendre compte de la composition sociale de l’établissement. Deux valeurs statistiques peuvent être analysées :</p>
<ul>
<li><p>la valeur moyenne des IPS des élèves de l’établissement, qui mesure le degré moyen d’avantage social à l’apprentissage</p></li>
<li><p>l’écart-type associé à l’IPS des établissements, qui correspond à l’écart de conditions sociales au sein d’une école, pouvant servir de mesure de mixité sociale</p></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre$Indice_stereotype and df_genre$IPS
t = -6.2613, df = 405, p-value = 9.747e-10
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.3832177 -0.2058196
sample estimates:
       cor 
-0.2970801 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>L’analyse statistique révèle une corrélation négative significative entre l’Indice de Position Sociale (IPS) moyen des établissements et l’indice de stéréotype exprimé par les élèves (r = -0.30, p &lt; 0.001). Autrement dit, plus l’IPS est élevé — reflétant un contexte social plus favorisé —, moins les élèves ont tendance à adhérer à des stéréotypes genrés sur les métiers. Cette tendance suggère une influence du milieu socio-éducatif sur la perception genrée du monde professionnel.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre$Indice_stereotype and df_genre$Ecart_type_IPS
t = -4.7632, df = 405, p-value = 2.659e-06
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.3203548 -0.1361677
sample estimates:
       cor 
-0.2303231 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Une corrélation négative significative est observée entre l’écart-type de l’IPS par établissement — indicateur de la mixité sociale — et l’indice de stéréotype des élèves (r = -0.23, p &lt; 0.001). Cela suggère que dans les établissements présentant une plus grande diversité sociale, les élèves expriment en moyenne moins de stéréotypes de genre. Cette relation pourrait refléter un effet bénéfique de la mixité sociale sur la déconstruction des représentations genrées du monde professionnel.</p>
</section>
</section>
</section>
<section id="biais" class="level1">
<h1>Biais</h1>
<section id="biais-de-désirabilité" class="level3">
<h3 class="anchored" data-anchor-id="biais-de-désirabilité">Biais de désirabilité</h3>
<p>Les élèves auraient pu répondre selon ce qu’ils pensaient qu’on attendait d’eux, plutôt que ce qu’ils pensent vraiment.</p>
<p>Pour cela, on peut d’abord regarder la distribution des réponses. Si on observe beaucoup de 1/10, il pourrait avoir une sur-réponse de ce qui est vu comme socialement acceptable.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>On voit qu’en majorité, les élèves ont bien répondu dans les extremas. Attention ! Les élèves n’ont pas répondu en majorité par Pas du tout d’accord. Cela advient de la manipulation précédente ayant inversé la réponse à certaines questions. Cela ne contredit néanmoins pas la tendance majoritaire de répondre par les possibilités à l’extrême, qui peuvent être vu comme des “bonnes” réponses.</p>
<p>On peut aussi analyser les écart-types de réponses par élève pour déceler la possibilité de réponse automatique.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Curieusement, l’écart-type de réponses des élèves se concentre autour de 2-3. Cela signifie que les élèves varient leur réponse en moyenne, donc l’effet de biais de désirabilité sociale est plus limité.</p>
<p>Néanmoins, il faut tenir compte des questions pouvant induire un éventuel biais d’interprétation des échelles. Cela peut avoir pour conséquence de centrer les réponses autour de 5. Pour certaines questions, cocher 1 = Pas du tout d’accord pouvait signifier pour l’élève que l’inverse de l’affirmation est vrai. On observe en effet sur la distribution par question au-dessus, que certaines questions concentrent les réponses “moyennes” autour de 5, comme par exemple :</p>
<ul>
<li>“Il y a plus d’hommes menuisiers que de femmes menuisières.”<br>
</li>
<li>“Les psychologues sont en général des hommes”<br>
</li>
<li>“En général, les hommes sont plus résistants que les femmes.”<br>
</li>
<li>“En général, les femmes sont plus douées que les hommes pour prendre soin des enfants.”<br>
</li>
<li>“Il y a plus d’hommes juges que de femmes juges.”<br>
</li>
<li>“Les femmes sont plus minutieuses que les hommes.”</li>
</ul>
<p>Si on enlève ces questions de la liste et on recalcule l’écart-type de réponse par élève, on peut obtenir une distribution moins biaisée.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Projet_Biais_Orientation_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>On observe alors un décalage de l’écart-type moyen des réponses vers la gauche, avec une concentration autour de 1-2. Les élèves varient donc moins leur réponse en l’absence de questions à interprétation ambiguë.</p>
</section>
</section>
<section id="analyse-par-catégories-de-questions" class="level1">
<h1>Analyse par catégories de questions</h1>
<section id="méthodologie-1" class="level2">
<h2 class="anchored" data-anchor-id="méthodologie-1">Méthodologie</h2>
<p>Pour affiner l’analyse, on peut distinguer trois types de questions posées lors de l’enquête :</p>
<ul>
<li><p>Questions factuelles, vérifiables par les données</p></li>
<li><p>Questions d’opinion, liées à des jugements de valeur, préjugés ou représentations</p></li>
</ul>
<p>Au sein des questions d’opinion, on peut distinguer à nouveau des questions liés aux stéréotypes en général et ceux liés au monde du travail.</p>
<ul>
<li>Questions à interprétation ambiguë ou qui abordent d’autres concepts</li>
</ul>
<p>On peut alors définir quatre listes à partir de cette catégorisation pour analyser les différences de sensibilité des élèves par rapport à celle-ci. On recrée les différentes indices comme dans la première partie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Calcul des indices factuel et stéréotypes :</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>df_genre<span class="sc">$</span>Indice_factuel <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(df_genre[, questions_factuelles], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>df_genre<span class="sc">$</span>Indice_stereotype_gen <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(df_genre[, questions_stereotypes_2], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>df_genre<span class="sc">$</span>Indice_stereotype_met <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(df_genre[, questions_metiers], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>df_genre<span class="sc">$</span>Indice_ambigue <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(df_genre[, questions_ambiguës_2], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="résultats-1" class="level2">
<h2 class="anchored" data-anchor-id="résultats-1">Résultats</h2>
<section id="corrélation-entre-les-indices-catégorielles" class="level3">
<h3 class="anchored" data-anchor-id="corrélation-entre-les-indices-catégorielles">Corrélation entre les indices catégorielles</h3>
<p>En premier lieu, on peut essayer de détecter une corrélation dans les résultats relatifs aux questions de stéréotype de type général et professionnel, puis dans les résultats aux questions de stéréotypes de métier et factuelles (comparer ces deux indices semblent plus cohérents dans la mesure où les questions factuelles portent sur des statistiques de métiers).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_genre<span class="sc">$</span>Indice_stereotype_gen, df_genre<span class="sc">$</span>Indice_stereotype_met, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre$Indice_stereotype_gen and df_genre$Indice_stereotype_met
t = 23.129, df = 406, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.7088121 0.7930415
sample estimates:
      cor 
0.7540097 </code></pre>
</div>
</div>
<p>On trouve une corrélation positive très forte et significative entre les réponses données relativement aux stéréotypes généraux et professionnels (r = 0.75, p &lt; 0.001). On peut en déduire qu’à plus de 75% des cas, les élèves qui ont répondu de manière à confirmer les stéréotypes dans la vie courante ont aussi répondu ainsi dans le cas spécifique du monde du travail.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_genre<span class="sc">$</span>Indice_factuel, df_genre<span class="sc">$</span>Indice_stereotype_met, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre$Indice_factuel and df_genre$Indice_stereotype_met
t = 11.798, df = 406, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.4292370 0.5741849
sample estimates:
      cor 
0.5052661 </code></pre>
</div>
</div>
<p>Une corrélation positive significative est observée entre l’indice factuel et l’indice de stéréotypes métiers (r = 0,51 ; p &lt; 0,001). Autrement dit, plus les élèves perçoivent une répartition genrée dans le monde professionnel (ex. : “Il y a plus d’hommes menuisiers que de femmes menuisières.”), plus ils ont tendance à exprimer des stéréotypes sur les métiers. Ce lien suggère une possible confusion entre des constats sociaux et des jugements normatifs, où ce qui est perçu comme une réalité devient, pour certains élèves, une forme de justification implicite.</p>
</section>
<section id="comparaison-selon-le-genre-niveau-et-ips-du-nouvel-indice-de-stéréotype" class="level3">
<h3 class="anchored" data-anchor-id="comparaison-selon-le-genre-niveau-et-ips-du-nouvel-indice-de-stéréotype">Comparaison selon le genre, niveau et IPS du nouvel indice de stéréotype</h3>
<p>On peut vérifier comment les différences entre scores de stéréotypes (maintenant affinés) selon le genre, niveau et IPS ont évoluées par rapport à l’analyse initiale.</p>
<p>On compare les deux indices de stéréotypes entre filles et garçons avec un modèle ANOVA à deux facteurs. Ceci va permettre de comparer les moyennes des groupes et déterminer si au moins une moyenne est significativement différente des autres.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test ANOVA</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Passer en format long</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df_genre <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Genre, Indice_stereotype_gen, Indice_stereotype_met) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Indice"</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Type_indice"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valeur"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Type_indice =</span> <span class="fu">ifelse</span>(Type_indice <span class="sc">==</span> <span class="st">"Indice_stereotype_gen"</span>, <span class="st">"Général"</span>, <span class="st">"Métiers"</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Enlever les NA et "non concerné"</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df_long <span class="sc">|&gt;</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Genre <span class="sc">==</span> <span class="st">"Fille"</span> <span class="sc">|</span> Genre <span class="sc">==</span> <span class="st">"Garçon"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ANOVA à deux facteurs</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>res_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(Valeur <span class="sc">~</span> Genre <span class="sc">*</span> Type_indice, <span class="at">data =</span> df_long)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_aov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   Df Sum Sq Mean Sq F value Pr(&gt;F)    
Genre               1  387.8   387.8 130.365 &lt;2e-16 ***
Type_indice         1  305.7   305.7 102.776 &lt;2e-16 ***
Genre:Type_indice   1    1.2     1.2   0.397  0.529    
Residuals         794 2362.0     3.0                   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>La variable Genre mesure la différence générale entre filles et garçons, tout indice confondu. On retrouve le résultat de la première partie : les garçons ont un niveau de stéréotypes significativement plus élevé que les filles.</p>
<p>La variable Type_indice mesure si le niveau de stéréotype est plus fort dans les représentations générales par rapport au monde professionnel (sans distinction de genre). Ici, on trouve que Type_indice est fortement significatif (p &lt; 2e-16), don les représentations stéréotypés sont effectivement plus forts en général que dans le monde du travail.</p>
<p>La variable d’interaction Genre × Type_Indice indique si l’écart entre les deux indices est différent selon le genre, c’est-à-dire s’il y a une véritable différence structurelle entre la vision des filles et des garçons. Or, on trouve un écart non significatif entre les deux indices. Il s’ensuit que filles et garçons distinguent les sphères pro/générale de manière comparable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Corrélation entre indice de stéréotype et niveaux de classe</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>df_genre_classe <span class="ot">&lt;-</span> df_genre <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Niveau_etude =</span> <span class="fu">case_when</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(Classe, <span class="st">"5e"</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(Classe, <span class="st">"4e"</span>) <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(Classe, <span class="st">"3e"</span>) <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(Classe, <span class="st">"2nde"</span>) <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(Classe, <span class="st">"1ère"</span>) <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(Classe, <span class="st">"Terminale"</span>) <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_genre_classe<span class="sc">$</span>Indice_stereotype_met, df_genre_classe<span class="sc">$</span>Niveau_etude, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre_classe$Indice_stereotype_met and df_genre_classe$Niveau_etude
t = -4.9627, df = 406, p-value = 1.025e-06
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.3286011 -0.1454378
sample estimates:
       cor 
-0.2391457 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_genre_classe<span class="sc">$</span>Indice_stereotype_gen, df_genre_classe<span class="sc">$</span>Niveau_etude, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre_classe$Indice_stereotype_gen and df_genre_classe$Niveau_etude
t = -3.8959, df = 406, p-value = 0.0001144
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.28172716 -0.09449162
sample estimates:
       cor 
-0.1898348 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_genre_classe<span class="sc">$</span>Indice_factuel, df_genre_classe<span class="sc">$</span>Niveau_etude, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_genre_classe$Indice_factuel and df_genre_classe$Niveau_etude
t = 1.4031, df = 406, p-value = 0.1614
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.02780806  0.16543308
sample estimates:
       cor 
0.06946411 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test ANOVA</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Passer en format long</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df_genre <span class="sc">|&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Niveau, Indice_stereotype_gen, Indice_stereotype_met) <span class="sc">|&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Indice"</span>),</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Type_indice"</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valeur"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Type_indice =</span> <span class="fu">ifelse</span>(Type_indice <span class="sc">==</span> <span class="st">"Indice_stereotype_gen"</span>, <span class="st">"Général"</span>, <span class="st">"Métiers"</span>))</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ANOVA à deux facteurs</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>res_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(Valeur <span class="sc">~</span> Niveau <span class="sc">*</span> Type_indice, <span class="at">data =</span> df_long)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_aov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    Df Sum Sq Mean Sq F value   Pr(&gt;F)    
Niveau               1  164.3  164.34  49.456 4.31e-12 ***
Type_indice          1  312.0  312.05  93.908  &lt; 2e-16 ***
Niveau:Type_indice   1    0.0    0.02   0.006    0.936    
Residuals          812 2698.2    3.32                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>La corrélation entre les indices de stéréotype et les niveaux de classe reste relativement similaire au résultat de la première partie. On trouve une nouvelle fois une plus forte corrélation de l’indice liée au métier avec les niveaux de classe par rapport à l’indice général.</p>
<p>En revanche, on observe que l’indice factuel (qui recense la moyenne sur les questions chiffrables) n’est pas corrélé (coefficient proche de 0, p-value &gt; 0.1) avec le niveau de classe.</p>
<p>A nouveau l’ANOVA à deux facteurs recense une différence significative entre collégiens et lycéens toute indice confondue. De même, le niveau de stéréotype est plus fort dans les représentations générales par rapport au monde professionnel (cf.&nbsp;résultat ANOVA ~ Genre). Cependant, l’interaction entre les deux variables donne à nouveau une différence non significative : l’écart de stéréotype général/métier n’est pas significativement différente entre collégiens et lycéens.</p>
</section>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>